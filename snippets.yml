# yaml-language-server: $schema=./schema.yaml
- commit:
    - snippet: hello-world
      commands:
        - echo_run_output: echo "Hello world" > test.txt
    - snippet: git-status
      highlight: 6-8
      commands:
        - echo_run_output: git status
    - snippet: git-add-git-status-1
      commands:
        - echo_run_output: git add test.txt
        - echo: ""
        - echo_run_output: git status
    - snippet: git-commit-1
      commands:
        - echo_run_output: git commit -m "Ilk commit"
        - run: yq -Y -i ".commit.first_commit_hash = \"$(git rev-parse HEAD)\"" "$VARIABLES_FILE"
    - snippet: git-log-1
      commands:
        - echo_run_output: git log
    - snippet: echo-merhaba-git-status
      commands:
        - echo_run_output: echo "Merhaba Dunya" >> test.txt
        - echo: ""
        - echo_run_output: git status
    - snippet: git-add-git-status-2
      commands:
        - echo_run_output: git add test.txt
        - echo: ""
        - echo_run_output: git status
    - snippet: git-commit-2
      commands:
        - echo_run_output: git commit -m "Dosyaya Merhaba Dunya ekledim"
        - run: yq -Y -i ".commit.second_commit_hash = \"$(git rev-parse HEAD)\"" "$VARIABLES_FILE"
    - snippet: git-log-graph
      commands:
        - echo_run_output: git log --graph
    - snippet: git-log-graph-patch
      commands:
        - echo_run_output: git log --graph --patch
- checkout:
    - snippet: git-log-graph
      commands:
        - echo_run_output: git log --graph
    - snippet: git-checkout
      highlight: "19"
      commands:
        - run: CHECKOUT_CMD="$(echo "git checkout <hash>" | sed -e "s|<hash>|$(git rev-parse --short HEAD~)|")"
        - expand_echo_run_output: CHECKOUT_CMD
        - run: yq -Y -i ".checkout.long_commit_hash = \"$(git rev-parse HEAD)\"" "$VARIABLES_FILE"
        - run: yq -Y -i ".checkout.short_commit_hash = \"$(git rev-parse --short HEAD)\"" "$VARIABLES_FILE"
    - snippet: cat-test-txt
      commands:
        - echo_run_output: cat test.txt
- branch:
    - snippet: git-log-graph-1
      commands:
        - run: git checkout main
        - echo_run_output: git log --graph
    - snippet: git-branch-1
      commands:
        - echo_run_output: git branch yeni-branch
        - echo: ""
        - echo_run_output: git checkout yeni-branch
        - echo: ""
        - echo_run_output: git branch
    - snippet: ls-refs-heads
      commands:
        - echo_run_output: ls .git/refs/heads
    - snippet: cat-heads-1
      commands:
        - echo_run_output: cat .git/refs/heads/main
        - echo: ""
        - echo_run_output: cat .git/refs/heads/yeni-branch
    - snippet: git-log-graph-2
      commands:
        - echo_run_output: git log --graph
        - run: yq -Y -i ".branch.commit_hash_1 = \"$(git rev-parse yeni-branch)\"" "$VARIABLES_FILE"
    - snippet: commit
      commands:
        - echo_run_output: echo "yeni-branch icin merhaba-dunya" >> test.txt
        - echo: ""
        - echo_run_output: git add test.txt
        - echo: ""
        - echo_run_output: git commit -m "yeni-branch icin ilk commitimi atiyorum"
        - echo: ""
        - echo_run_output: git log --graph
        - run: yq -Y -i ".branch.commit_hash_2 = \"$(git rev-parse yeni-branch)\"" "$VARIABLES_FILE"
    - snippet: cat-heads-2
      commands:
        - echo_run_output: cat .git/refs/heads/main
        - echo: ""
        - echo_run_output: cat .git/refs/heads/yeni-branch
    - snippet: manual-branch-creation
      commands:
        - echo_run_output: git branch
        - echo: ""
        - run: YENI_BRANCH_COMMIT="echo \"$(git rev-parse yeni-branch)\" > .git/refs/heads/yeni-branch-2"
        - expand_echo_run_output: YENI_BRANCH_COMMIT
        - echo: ""
        - echo_run_output: git branch
        - echo: ""
        - echo_run_output: git checkout yeni-branch-2
- commit_history:
    - snippet: git-log-graph-oneline
      commands:
        - echo_run_output: git log --graph --parents --oneline